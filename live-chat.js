const _0x35042d=_0x5524;(function(_0x5043be,_0x197319){const _0x1e4332=_0x5524,_0xeceaf8=_0x5043be();while(!![]){try{const _0x4e0bf9=-parseInt(_0x1e4332(0x110))/0x1*(-parseInt(_0x1e4332(0x134))/0x2)+parseInt(_0x1e4332(0x133))/0x3*(parseInt(_0x1e4332(0x10b))/0x4)+-parseInt(_0x1e4332(0x114))/0x5*(-parseInt(_0x1e4332(0x12c))/0x6)+-parseInt(_0x1e4332(0x147))/0x7*(parseInt(_0x1e4332(0x120))/0x8)+parseInt(_0x1e4332(0x126))/0x9+parseInt(_0x1e4332(0x11e))/0xa+-parseInt(_0x1e4332(0x127))/0xb;if(_0x4e0bf9===_0x197319)break;else _0xeceaf8['push'](_0xeceaf8['shift']());}catch(_0x22ee04){_0xeceaf8['push'](_0xeceaf8['shift']());}}}(_0x324a,0xb40e4));const firebaseConfig={'apiKey':_0x35042d(0x145),'authDomain':_0x35042d(0x106),'databaseURL':_0x35042d(0x13c),'projectId':_0x35042d(0x136),'storageBucket':_0x35042d(0x130),'messagingSenderId':_0x35042d(0x146),'appId':'1:650701388645:web:19072d42dcc445bb757f8c'};function _0x324a(){const _0x3642c7=['uid','komik-yydz.firebaseapp.com','chat-box','close-btn','admin','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','3616208uccjuc','</span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bubble\x22>','akun.html','appendChild','scrollHeight','1tJuFVE','add','toLocaleTimeString','chats','430xctFtN','role','users','set','/lastLogin','[data-key=\x22','photoURL','val','href','Pengguna','3807450rqrslE','chat-form','5665016nXUVXD','location','database','ref','getElementById','classList','5533317WDQAeX','14838373ZnrGhM','value','querySelector','once','exists','26382PZJhJM','entries','submit','index.html','komik-yydz.firebasestorage.app','2-digit','User','3TxeMXW','1033652qbqyBD','username','komik-yydz','message','displayName','key','initializeApp','data-key','https://komik-yydz-default-rtdb.asia-southeast1.firebasedatabase.app','div','users/','\x20<span>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22time\x22>','innerHTML','trim','click','email','AIzaSyBPzquGkVE0weenABUs_uAwiApfZxzco8E','650701388645','7vrkhOe','addEventListener'];_0x324a=function(){return _0x3642c7;};return _0x324a();}firebase[_0x35042d(0x13a)](firebaseConfig);const auth=firebase['auth'](),db=firebase[_0x35042d(0x122)](),chatBox=document['getElementById'](_0x35042d(0x107)),chatForm=document[_0x35042d(0x124)](_0x35042d(0x11f)),messageInput=document[_0x35042d(0x124)](_0x35042d(0x137)),closeBtn=document['getElementById'](_0x35042d(0x108));let currentUser=null,currentRole=_0x35042d(0x132);closeBtn[_0x35042d(0x104)](_0x35042d(0x143),()=>window[_0x35042d(0x121)][_0x35042d(0x11c)]=_0x35042d(0x12f));function renderMessage(_0x3e15ad){const _0x1b9c22=_0x35042d;if(chatBox[_0x1b9c22(0x129)](_0x1b9c22(0x119)+_0x3e15ad[_0x1b9c22(0x139)]+'\x22]'))return;const _0xce4998=document['createElement'](_0x1b9c22(0x13d));_0xce4998[_0x1b9c22(0x125)][_0x1b9c22(0x111)](_0x1b9c22(0x137));if(currentUser&&_0x3e15ad[_0x1b9c22(0x105)]===currentUser['uid'])_0xce4998['classList'][_0x1b9c22(0x111)]('me');if(_0x3e15ad[_0x1b9c22(0x115)]&&_0x3e15ad[_0x1b9c22(0x115)]['toLowerCase']()===_0x1b9c22(0x109))_0xce4998[_0x1b9c22(0x125)][_0x1b9c22(0x111)](_0x1b9c22(0x109));if(_0x3e15ad[_0x1b9c22(0x139)])_0xce4998['setAttribute'](_0x1b9c22(0x13b),_0x3e15ad[_0x1b9c22(0x139)]);_0xce4998[_0x1b9c22(0x141)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20class=\x22avatar\x22\x20src=\x22'+(_0x3e15ad[_0x1b9c22(0x11a)]||'https://via.placeholder.com/36')+'\x22\x20alt=\x22avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22username\x22>'+_0x3e15ad[_0x1b9c22(0x135)]+_0x1b9c22(0x13f)+(_0x3e15ad[_0x1b9c22(0x115)]||'User')+_0x1b9c22(0x10c)+_0x3e15ad['message']+_0x1b9c22(0x140)+_0x3e15ad['time']+_0x1b9c22(0x10a),chatBox[_0x1b9c22(0x10e)](_0xce4998),chatBox['scrollTop']=chatBox[_0x1b9c22(0x10f)];}async function loadChats(){const _0x5d08df=_0x35042d,_0x532bd9=await db[_0x5d08df(0x123)](_0x5d08df(0x113))['once'](_0x5d08df(0x128)),_0x3aba4a=_0x532bd9[_0x5d08df(0x11b)]();if(!_0x3aba4a)return chatBox['innerHTML']='';const _0x364db9=await db[_0x5d08df(0x123)](_0x5d08df(0x116))[_0x5d08df(0x12a)]('value'),_0x7e8eb8=_0x364db9[_0x5d08df(0x11b)]()||{};chatBox[_0x5d08df(0x141)]='';for(const [_0x5ec56e,_0x1d69e0]of Object[_0x5d08df(0x12d)](_0x3aba4a)){const _0x2e6c8e={..._0x1d69e0,'key':_0x5ec56e};!_0x2e6c8e['role']&&_0x2e6c8e[_0x5d08df(0x105)]&&(_0x2e6c8e[_0x5d08df(0x115)]=_0x7e8eb8[_0x2e6c8e[_0x5d08df(0x105)]]?.[_0x5d08df(0x115)]||_0x5d08df(0x132)),renderMessage(_0x2e6c8e);}}function _0x5524(_0xe5a33a,_0x3c56a6){const _0x324a93=_0x324a();return _0x5524=function(_0x552469,_0x29b1b7){_0x552469=_0x552469-0x104;let _0x5e8870=_0x324a93[_0x552469];return _0x5e8870;},_0x5524(_0xe5a33a,_0x3c56a6);}auth['onAuthStateChanged'](async _0x1e926b=>{const _0xdd541e=_0x35042d;if(!_0x1e926b)return alert('Silakan\x20login\x20dulu.'),window[_0xdd541e(0x121)][_0xdd541e(0x11c)]=_0xdd541e(0x10d);currentUser=_0x1e926b;const _0x48de60=await db['ref'](_0xdd541e(0x13e)+_0x1e926b[_0xdd541e(0x105)])['once']('value');!_0x48de60['exists']()?await db[_0xdd541e(0x123)]('users/'+_0x1e926b[_0xdd541e(0x105)])[_0xdd541e(0x117)]({'name':_0x1e926b[_0xdd541e(0x138)]||'Pengguna','email':_0x1e926b[_0xdd541e(0x144)],'photoURL':_0x1e926b['photoURL']||'','role':_0xdd541e(0x132),'lastLogin':new Date()['toISOString']()}):(currentRole=_0x48de60['val']()[_0xdd541e(0x115)]||'User',await db['ref']('users/'+_0x1e926b[_0xdd541e(0x105)]+_0xdd541e(0x118))[_0xdd541e(0x117)](new Date()['toISOString']())),await loadChats(),db[_0xdd541e(0x123)](_0xdd541e(0x113))['on']('child_added',async _0x9960ea=>{const _0x3f0b94=_0xdd541e,_0x58fd62=_0x9960ea[_0x3f0b94(0x11b)]();_0x58fd62[_0x3f0b94(0x139)]=_0x9960ea[_0x3f0b94(0x139)];if(chatBox[_0x3f0b94(0x129)]('[data-key=\x22'+_0x58fd62['key']+'\x22]'))return;if(!_0x58fd62[_0x3f0b94(0x115)]&&_0x58fd62[_0x3f0b94(0x105)]){const _0x3720cf=await db[_0x3f0b94(0x123)](_0x3f0b94(0x13e)+_0x58fd62[_0x3f0b94(0x105)])[_0x3f0b94(0x12a)]('value');_0x58fd62[_0x3f0b94(0x115)]=_0x3720cf[_0x3f0b94(0x12b)]()?_0x3720cf[_0x3f0b94(0x11b)]()['role']:_0x3f0b94(0x132);}renderMessage(_0x58fd62);});}),chatForm[_0x35042d(0x104)](_0x35042d(0x12e),async _0x148a33=>{const _0xca3b21=_0x35042d;_0x148a33['preventDefault']();if(!currentUser)return;const _0x4165f8=messageInput[_0xca3b21(0x128)][_0xca3b21(0x142)]();if(!_0x4165f8)return;const _0x3a7e4d={'uid':currentUser[_0xca3b21(0x105)],'username':currentUser[_0xca3b21(0x138)]||_0xca3b21(0x11d),'role':currentRole,'photoURL':currentUser[_0xca3b21(0x11a)]||'','message':_0x4165f8,'time':new Date()[_0xca3b21(0x112)]([],{'hour':_0xca3b21(0x131),'minute':_0xca3b21(0x131)})},_0x5387ba=await db[_0xca3b21(0x123)](_0xca3b21(0x113))['push'](_0x3a7e4d);_0x3a7e4d[_0xca3b21(0x139)]=_0x5387ba[_0xca3b21(0x139)],renderMessage(_0x3a7e4d),messageInput[_0xca3b21(0x128)]='';});